---
import { getCollection } from "astro:content";

import "@/styles/home.scss";

import Layout from "@/layouts/Layout.astro";
import { formatDate, skills, certifications } from "@/lib/utils";

const lang = "en";

export const services = [
  {
    name: "Software development",
    description:
      "Transforming <b>ideas into reality</b>. With over four years of experience with Software Development, I <mark>wield my coding sword</mark> to craft solutions and facing monsters easily. I thrive on <i>learning and adapting</i>, ready to conquer any challenge that comes my way.",
  },
  {
    name: "Software consulting",
    description:
      "Like a bounty hunter tracking elusive targets, I navigate the digital landscape, hunting down solutions tailored to your needs. With over four years of solid experience, I'll seek out for solutions and enhancements. Adaptability is my armor, coding is my weapon. I stand ready to conquer any consulting challange that crosses my path.",
  },
];

const blogPosts = await getCollection("blog", ({ id, data }) => {
  return id.startsWith("en/") && data.publish_date;
});
---

<Layout
  title="Home"
  description="Software Developer with over four years of experience. Specialized in TypeScript."
  lang={lang}
>
  <main>
    <section class="about">
      <section class="about-container">
        <div class="hello">
          <div class="avatar-container">
            <figure class="avatar">
              <img
                width="145px"
                height="145px"
                src="https://avatars.githubusercontent.com/u/50281523?v=4"
                alt="Felipe Heredia, depicted in the image"
              />
            </figure>

            <aside>
              <h3 class="mb-2">
                Hello, I'm <br />
                Felipe Heredia!
              </h3>
              <h4>Backend Developer</h4>
            </aside>
          </div>

          <p>
            I'm <i>Felipe Heredia</i>, a Software Developer with over
            <b>four years of experience</b>. I specialize in
            <b>TypeScript</b>, though I've dabbled in <b>Rust</b> and other
            <b>backend-focused</b> languages. I live in São Paulo, Brazil. I enjoy solving
            problems with code - and having fun doing it. I use Vim btw.
          </p>
        </div>

        <div class="contact">
          <p>Contact me:</p>
          <a id="email" href="mailto:hello@felipeheredia.com">hello@felipeheredia.com</a>
        </div>
      </section>

      <section class="social-media-container">
        <a class="social-media" href="https://github.com/felipe-heredia" target="_blank">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
            style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z"
            ></path>
          </svg>

          GitHub
        </a>

        <a
          class="social-media"
          href="https://linkedin.com/in/felipe-heredia-moura"
          target="_blank"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
            style="fill: #0a66c2;transform: ;msFilter:;"
          >
            <path
              d="M20 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM8.339 18.337H5.667v-8.59h2.672v8.59zM7.003 8.574a1.548 1.548 0 1 1 0-3.096 1.548 1.548 0 0 1 0 3.096zm11.335 9.763h-2.669V14.16c0-.996-.018-2.277-1.388-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248h-2.667v-8.59h2.56v1.174h.037c.355-.675 1.227-1.387 2.524-1.387 2.704 0 3.203 1.778 3.203 4.092v4.71z"
            ></path>
          </svg>

          LinkedIn
        </a>

        <a class="social-media" href="mailto:hello@felipeheredia.com" target="_blank">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-mail"
          >
            <rect width="20" height="16" x="2" y="4" rx="2"></rect>
            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
          </svg>

          Email
        </a>

        <a class="social-media" href="/resume.pdf">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-file-text"
          >
            <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"></path>
            <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
            <path d="M10 9H8"></path>
            <path d="M16 13H8"></path>
            <path d="M16 17H8"></path>
          </svg>

          Curriculum vitæ/CV
        </a>
      </section>
    </section>

    <section class="info-container services">
      <section class="services-container">
        <h2>My services</h2>

        <div class="services-content">
          <aside class="services">
            {
              services.map(service => (
                <div class="service">
                  <h3>{service.name}</h3>
                  <p set:html={service.description} />
                </div>
              ))
            }
          </aside>

          <aside class="skills">
            {
              skills.map(skill => (
                <div class="skill">
                  <i class={skill.iconClass} />
                  {skill.name && <p>{skill.name}</p>}
                </div>
              ))
            }
          </aside>
        </div>
      </section>
    </section>

    <section class="info-container certifications">
      <section class="certifications-container">
        <h2>My certifications</h2>

        <div class="certifications-content">
          {
            certifications.map(certification => (
              <a class="certification" href={certification.link} target="_blank">
                <img width="175px" src={certification.image} alt="" />
                <b>{certification.text}</b>
              </a>
            ))
          }
        </div>
      </section>
    </section>

    <section class="info-container posts">
      <section class="posts-container">
        <h2>My posts</h2>

        <ul class="posts-list">
          {
            blogPosts.map(post => (
              <li class="post">
                <a href={`/blog/${post.slug}`}>
                  <figure>
                    <img
                      src={post.data.image}
                      alt={post.data.image_alt}
                      width="450"
                      height="250"
                    />

                    <div class="post-content">
                      <h4>{post.data.title}</h4>
                      <p>{post.data.description}</p>

                      <footer>
                        <span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="lucide lucide-calendar"
                          >
                            <path d="M8 2v4" />
                            <path d="M16 2v4" />
                            <rect width="18" height="18" x="3" y="4" rx="2" />
                            <path d="M3 10h18" />
                          </svg>
                          <time datetime={post.data.publish_date}>
                            {formatDate(
                              new Date(post.data.publish_date),
                              "MMM dd, y",
                              lang,
                            )}
                          </time>
                        </span>
                        <span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="lucide lucide-tag"
                          >
                            <path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z" />
                            <circle cx="7.5" cy="7.5" r=".5" fill="currentColor" />
                          </svg>
                          {post.data.tag}
                        </span>
                      </footer>
                    </div>
                  </figure>
                </a>
              </li>
            ))
          }
        </ul>
      </section>
    </section>
  </main>
</Layout>
